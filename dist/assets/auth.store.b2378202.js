import{az as Y,r as J,aA as Z,aB as ee,aC as te,w as k,aD as re,a0 as ne,av as ae}from"./index.5b2acc78.js";import{$api as T}from"./axios.33769ef8.js";var F;const h=typeof window!="undefined",se=e=>typeof e=="function",oe=e=>typeof e=="string",ie=()=>{};h&&((F=window==null?void 0:window.navigator)==null?void 0:F.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function $(e){return typeof e=="function"?e():Y(e)}function ue(e,t){function r(...n){return new Promise((s,o)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(s).catch(o)})}return r}const B=e=>e();function le(e=B){const t=J(!0);function r(){t.value=!1}function n(){t.value=!0}const s=(...o)=>{t.value&&e(...o)};return{isActive:Z(t),pause:r,resume:n,eventFilter:s}}function fe(e){return e}function ce(e){return ee()?(te(e),!0):!1}var z=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,ve=(e,t)=>{var r={};for(var n in e)pe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&z)for(var n of z(e))t.indexOf(n)<0&&de.call(e,n)&&(r[n]=e[n]);return r};function ye(e,t,r={}){const n=r,{eventFilter:s=B}=n,o=ve(n,["eventFilter"]);return k(e,ue(s,t),o)}var me=Object.defineProperty,we=Object.defineProperties,Oe=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_e=(e,t)=>{for(var r in t||(t={}))H.call(t,r)&&C(e,r,t[r]);if(S)for(var r of S(t))M.call(t,r)&&C(e,r,t[r]);return e},ge=(e,t)=>we(e,Oe(t)),he=(e,t)=>{var r={};for(var n in e)H.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&S)for(var n of S(e))t.indexOf(n)<0&&M.call(e,n)&&(r[n]=e[n]);return r};function be(e,t,r={}){const n=r,{eventFilter:s}=n,o=he(n,["eventFilter"]),{eventFilter:v,pause:O,resume:_,isActive:f}=le(s);return{stop:ye(e,t,ge(_e({},o),{eventFilter:v})),pause:O,resume:_,isActive:f}}function Se(e){var t;const r=$(e);return(t=r==null?void 0:r.$el)!=null?t:r}const P=h?window:void 0;h&&window.document;h&&window.navigator;h&&window.location;function R(...e){let t,r,n,s;if(oe(e[0])||Array.isArray(e[0])?([r,n,s]=e,t=P):[t,r,n,s]=e,!t)return ie;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const o=[],v=()=>{o.forEach(u=>u()),o.length=0},O=(u,l,y,c)=>(u.addEventListener(l,y,c),()=>u.removeEventListener(l,y,c)),_=k(()=>[Se(t),$(s)],([u,l])=>{v(),u&&o.push(...r.flatMap(y=>n.map(c=>O(u,y,c,l))))},{immediate:!0,flush:"post"}),f=()=>{_(),v()};return ce(f),f}const E=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},A="__vueuse_ssr_handlers__";E[A]=E[A]||{};const Pe=E[A];function Ie(e,t){return Pe[e]||t}function Ee(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var Ae=Object.defineProperty,D=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,Q=(e,t,r)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,U=(e,t)=>{for(var r in t||(t={}))$e.call(t,r)&&Q(e,r,t[r]);if(D)for(var r of D(t))Ne.call(t,r)&&Q(e,r,t[r]);return e};const w={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},W="vueuse-storage";function je(e,t,r,n={}){var s;const{flush:o="pre",deep:v=!0,listenToStorageChanges:O=!0,writeDefaults:_=!0,mergeDefaults:f=!1,shallow:u,window:l=P,eventFilter:y,onError:c=a=>{console.error(a)}}=n,m=(u?re:J)(t);if(!r)try{r=Ie("getDefaultStorage",()=>{var a;return(a=P)==null?void 0:a.localStorage})()}catch(a){c(a)}if(!r)return m;const p=$(t),N=Ee(p),b=(s=n.serializer)!=null?s:w[N],{pause:G,resume:j}=be(m,()=>K(m.value),{flush:o,deep:v,eventFilter:y});return l&&O&&(R(l,"storage",I),R(l,W,X)),I(),m;function K(a){try{if(a==null)r.removeItem(e);else{const i=b.write(a),d=r.getItem(e);d!==i&&(r.setItem(e,i),l&&l.dispatchEvent(new CustomEvent(W,{detail:{key:e,oldValue:d,newValue:i,storageArea:r}})))}}catch(i){c(i)}}function q(a){const i=a?a.newValue:r.getItem(e);if(i==null)return _&&p!==null&&r.setItem(e,b.write(p)),p;if(!a&&f){const d=b.read(i);return se(f)?f(d,p):N==="object"&&!Array.isArray(d)?U(U({},p),d):d}else return typeof i!="string"?i:b.read(i)}function X(a){I(a.detail)}function I(a){if(!(a&&a.storageArea!==r)){if(a&&a.key==null){m.value=p;return}if(!(a&&a.key!==e)){G();try{m.value=q(a)}catch(i){c(i)}finally{a?ne(j):j()}}}}}function g(e,t,r={}){const{window:n=P}=r;return je(e,t,n==null?void 0:n.localStorage,r)}var x;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(x||(x={}));var Te=Object.defineProperty,L=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,V=(e,t,r)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ce=(e,t)=>{for(var r in t||(t={}))Fe.call(t,r)&&V(e,r,t[r]);if(L)for(var r of L(t))ze.call(t,r)&&V(e,r,t[r]);return e};const Re={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Ce({linear:fe},Re);const Ue=ae("auth",{state:()=>({userInfo:g("userInfo",null,{serializer:w.object}),token:g("token",null,{serializer:w.string}),userType:g("userType",null,{serializer:w.string}),userRole:g("userRole",null,{serializer:w.object}),permissions:g("permissions",null,{serializer:w.string})}),getters:{getUserInfo:e=>e.userInfo,getToken:e=>e.token,getUserType:e=>e.userType,getUserRoleName:e=>e.userRole.role_name},actions:{async UserLogin(e){const t=await T.post("/users/login",e);this.userInfo=t.data.data,this.userType=t.data.data.user_type,this.userRole=t.data.data.role,this.token=t.data.data.token,this.permissions=t.data.data.permissions},async InviteNewUser(e){return(await T.post("/users/invite-user",e,{headers:{Authorization:`Bearer ${this.token}`}})).data},hasAccess(e){const t=this.permissions;return e==null?void 0:e.some(r=>t.includes(r))},canAccess(e){return this.permissions.includes(e)},logout(){this.userInfo=null,this.token=null,this.userRole=null,this.userType=null}}});export{Ue as u};
