import{b as y,a as C}from"./QSelect.fbaf293c.js";import{_ as U,r as m,$ as I,a4 as M,o as c,a as h,e as t,f as a,Q as x,a6 as l,ab as q,ac as B,ae as r,aK as N,ay as L,aL as T,aw as E,ax as P,ad as f,B as j,aa as z,a9 as F,ag as J,ah as Y,a5 as Q,a7 as K}from"./index.5b2acc78.js";import{Q as A,a as O,b as _}from"./QTable.9be2365e.js";import{Q as p,b as v,a as k}from"./selection.9088e168.js";import{Q as G}from"./QList.3973144f.js";import{E as H}from"./EmpAttendance.033326ee.js";import{A as R}from"./api-service.e4a3f494.js";import{u as W}from"./use-quasar.b612f3c1.js";import{u as X}from"./auth.store.b2378202.js";import"./format.2a3572e1.js";import"./use-fullscreen.6b3ff2b1.js";import"./ClosePopup.a91d546e.js";import"./axios.33769ef8.js";import"./moment.53181859.js";const Z=[{name:"user",required:!0,label:"Name",align:"left",field:o=>o.name,format:o=>`${o}`,sortable:!0},{name:"email",align:"left",label:"Email",field:"email",sortable:!0},{name:"phone",align:"left",label:"Phone",field:"phone",sortable:!0},{name:"lateDuration",align:"left",label:"Last work duration",field:"lateDuration",sortable:!0},{name:"totalDuration",align:"left",label:"Total work duration",field:"totalDuration",sortable:!0}],S=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],$={components:{EmpAttendance:H},setup(){const o=m([]),d=new R,w=W(),s=X(),g=m([]),b=m(!1),u=m(""),e=m({});I(()=>{const i=new Date,V=(i.getMonth()+1).toString().padStart(2,"0");e.value=S.find(D=>D.value===V),u.value=i.getFullYear(),n()});async function n(){try{b.value=!0;const i=await d.get("/attendance/analytics",{params:{year:u.value,month:e.value.value}});g.value=i.data.data,b.value=!1}catch(i){console.log("\u{1F680} ~ file: AttendancePage.vue:260 ~ fetchAnalytics ~ error:",i)}}return{columns:Z,rows:g,selected:o,$q:w,authStore:s,loading:b,months:S,month:e,year:u,fetchAnalytics:n}}},ee=o=>(J("data-v-2dfe3d81"),o=o(),Y(),o),ae={class:"mx-4 my-6 flex justify-between"},le=ee(()=>t("div",{class:"text-2xl font-semibold"},"Attendance Analytics",-1)),te={class:"flex md:gap-x-5 gap-1 flex-row justify-items-end items-center"},se={class:"md:w-[150px]"},oe={class:"md:w-[150px]"},ne={class:""},de={class:""},re={class:"q-px-md gt-sm"},ie={class:"tw-py-1 tw-rounded-md"},ce={class:"flex items-center gap-4"},ue=["src"],me={key:1},fe={class:"flex gap-2"},_e={class:"text-xs"},ve={class:"text-xs bg-gray-400 text-white rounded px-1"},be={class:"text-xs"},he={class:"text-xs"},pe={class:"text-xs"},ge={class:"text-xs"},we={class:"q-pa-md lt-md"},ye={class:"column items-end"};function xe(o,d,w,s,g,b){const u=M("emp-attendance");return c(),h("main",null,[t("section",ae,[le,t("div",te,[t("div",se,[a(y,{class:"w-full",outlined:"",dense:"",modelValue:s.year,"onUpdate:modelValue":d[0]||(d[0]=e=>s.year=e),options:["2023","2024","2025"],label:"Year",filled:""},null,8,["modelValue"])]),t("div",oe,[a(y,{class:"w-full",outlined:"",dense:"",modelValue:s.month,"onUpdate:modelValue":d[1]||(d[1]=e=>s.month=e),options:s.months,label:"Month",filled:""},null,8,["modelValue","options"])]),t("div",null,[a(x,{color:"green",unelevated:"","no-caps":"",label:"Apply",onClick:s.fetchAnalytics},null,8,["onClick"])])])]),t("div",ne,[t("section",de,[t("div",re,[a(A,{flat:"",class:"h-[85vh]",rows:s.rows,columns:s.columns,style:{background:"rgba(244, 244, 244, 0.8)"},"row-key":"name"},{body:l(e=>[a(O,{class:"",props:e},{default:l(()=>[a(_,null,{default:l(()=>[t("div",ie,[t("div",ce,[t("div",null,[a(B,{"font-size":"20px",color:"green","text-color":"white"},{default:l(()=>[e.row.user.profile_img?(c(),h("img",{key:0,src:e.row.user.profile_img,alt:""},null,8,ue)):(c(),h("span",me,r(e.row.user.first_name.charAt(0)+e.row.user.last_name.charAt(0)),1))]),_:2},1024)]),t("div",fe,[t("span",_e,r(e.row.user.first_name)+" "+r(e.row.user.last_name),1),t("span",ve,r(e.row.user.designation),1)])])])]),_:2},1024),a(_,null,{default:l(()=>[t("div",null,[t("div",be,r(e.row.user.email),1)])]),_:2},1024),a(_,null,{default:l(()=>[t("div",null,[t("div",he,r(e.row.user.phone_number),1)])]),_:2},1024),a(_,null,{default:l(()=>[t("div",null,[t("div",pe,r(e.row.lateDuration),1)])]),_:2},1024),a(_,null,{default:l(()=>[t("div",null,[t("div",ge,r(e.row.totalDuration),1)])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),t("div",we,[a(A,{rows:s.rows,columns:s.columns,"row-key":"name",selection:"multiple",selected:s.selected,"onUpdate:selected":d[2]||(d[2]=e=>s.selected=e),filter:o.filter,grid:"","hide-header":""},{item:l(e=>[t("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:N(e.selected?"transform: scale(0.95);":"")},[a(L,{bordered:"",flat:"",class:T(e.selected?s.$q.dark.isActive?"bg-grey-9":"bg-grey-2":"")},{default:l(()=>[a(E,{class:"flex justify-between"},{default:l(()=>[a(P,{dense:"",modelValue:e.selected,"onUpdate:modelValue":n=>e.selected=n,label:e.row.name},null,8,["modelValue","onUpdate:modelValue","label"]),t("div",ye,[a(x,{flat:"",icon:"more_vert"},{default:l(()=>[a(C,{anchor:"top middle",self:"top right"},{default:l(()=>[a(p,{clickable:""},{default:l(()=>[a(v,null,{default:l(()=>[f("Update")]),_:1})]),_:1}),a(p,{clickable:""},{default:l(()=>[a(v,null,{default:l(()=>[f("Delete")]),_:1})]),_:1}),a(p,{clickable:""},{default:l(()=>[a(v,null,{default:l(()=>[f("Update Status")]),_:1})]),_:1})]),_:1})]),_:1})])]),_:2},1024),a(j),a(G,{dense:""},{default:l(()=>[(c(!0),h(z,null,F(e.cols.filter(n=>n.name!=="desc"),n=>(c(),Q(p,{key:n.name},{default:l(()=>[a(v,null,{default:l(()=>[n.label!="Action"?(c(),Q(k,{key:0},{default:l(()=>[f(r(n.label),1)]),_:2},1024)):K("",!0)]),_:2},1024),a(v,{side:""},{default:l(()=>[a(k,{caption:""},{default:l(()=>[f(r(n.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["class"])],4)]),_:1},8,["rows","columns","selected","filter"])])])]),a(q,{modelValue:o.confirm,"onUpdate:modelValue":d[3]||(d[3]=e=>o.confirm=e),persistent:""},{default:l(()=>[a(u)]),_:1},8,["modelValue"])])}var Te=U($,[["render",xe],["__scopeId","data-v-2dfe3d81"]]);export{Te as default};
