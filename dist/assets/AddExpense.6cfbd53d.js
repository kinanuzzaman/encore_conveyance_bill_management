import{b as be}from"./QSelect.fbaf293c.js";import{G as De,H as ee,I as $e,J as we,K as ie,L as se,O as ce,F as de,P as ue,r as E,h as w,w as me,p as he,a0 as Se,i as S,T as Ce,bn as Ae,j as pe,bo as ke,g as ye,v as Ee,y as qe,$ as Ve,m as Ue,a1 as Pe,aP as je,Q as c,V as Re,d as j,at as re,_ as q,o as r,a as y,f as l,a6 as u,aw as R,a8 as p,e as i,a5 as v,a7 as V,ay as O,aa as F,a9 as I,ab as B,a4 as ae,ax as Oe,ad as Te,a3 as Fe,aI as Ie,bp as Be}from"./index.5b2acc78.js";import{Q as N}from"./QUploader.8b7a9e4c.js";import{g as fe,s as ge}from"./touch.70a9dd44.js";import{c as Ne}from"./selection.9088e168.js";import{u as Le,a as ze,b as Me}from"./use-fullscreen.6b3ff2b1.js";import{A as U}from"./api-service.e4a3f494.js";import{u as T}from"./auth.store.b2378202.js";import{S as te}from"./SearchAddCompo.f8c630c2.js";import{u as Qe}from"./use-quasar.b612f3c1.js";import"./format.2a3572e1.js";import"./axios.33769ef8.js";function Ke(e){const a=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((m,f)=>{const d=parseFloat(m);d&&(a[f]=d)}),a}var Ye=De({name:"touch-swipe",beforeMount(e,{value:a,arg:m,modifiers:f}){if(f.mouse!==!0&&ee.has.touch!==!0)return;const d=f.mouseCapture===!0?"Capture":"",n={handler:a,sensitivity:Ke(m),direction:fe(f),noop:$e,mouseStart(o){ge(o,n)&&we(o)&&(ie(n,"temp",[[document,"mousemove","move",`notPassive${d}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(o,!0))},touchStart(o){if(ge(o,n)){const t=o.target;ie(n,"temp",[[t,"touchmove","move","notPassiveCapture"],[t,"touchcancel","end","notPassiveCapture"],[t,"touchend","end","notPassiveCapture"]]),n.start(o)}},start(o,t){ee.is.firefox===!0&&se(e,!0);const g=ce(o);n.event={x:g.left,y:g.top,time:Date.now(),mouse:t===!0,dir:!1}},move(o){if(n.event===void 0)return;if(n.event.dir!==!1){de(o);return}const t=Date.now()-n.event.time;if(t===0)return;const g=ce(o),P=g.left-n.event.x,b=Math.abs(P),A=g.top-n.event.y,D=Math.abs(A);if(n.event.mouse!==!0){if(b<n.sensitivity[1]&&D<n.sensitivity[1]){n.end(o);return}}else if(b<n.sensitivity[2]&&D<n.sensitivity[2])return;const C=b/t,M=D/t;n.direction.vertical===!0&&b<D&&b<100&&M>n.sensitivity[0]&&(n.event.dir=A<0?"up":"down"),n.direction.horizontal===!0&&b>D&&D<100&&C>n.sensitivity[0]&&(n.event.dir=P<0?"left":"right"),n.direction.up===!0&&b<D&&A<0&&b<100&&M>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&b<D&&A>0&&b<100&&M>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&b>D&&P<0&&D<100&&C>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&b>D&&P>0&&D<100&&C>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(de(o),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ne(),n.styleCleanup=W=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const Q=()=>{document.body.classList.remove("no-pointer-events--children")};W===!0?setTimeout(Q,50):Q()}),n.handler({evt:o,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:t,distance:{x:b,y:D}})):n.end(o)},end(o){n.event!==void 0&&(ue(n,"temp"),ee.is.firefox===!0&&se(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),o!==void 0&&n.event.dir!==!1&&de(o),n.event=void 0)}};if(e.__qtouchswipe=n,f.mouse===!0){const o=f.mouseCapture===!0||f.mousecapture===!0?"Capture":"";ie(n,"main",[[e,"mousedown","mouseStart",`passive${o}`]])}ee.has.touch===!0&&ie(n,"main",[[e,"touchstart","touchStart",`passive${f.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const m=e.__qtouchswipe;m!==void 0&&(a.oldValue!==a.value&&(typeof a.value!="function"&&m.end(),m.handler=a.value),m.direction=fe(a.modifiers))},beforeUnmount(e){const a=e.__qtouchswipe;a!==void 0&&(ue(a,"main"),ue(a,"temp"),ee.is.firefox===!0&&se(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete e.__qtouchswipe)}});function He(){const e=new Map;return{getCache:function(a,m){return e[a]===void 0?e[a]=m:e[a]},getCacheWithFn:function(a,m){return e[a]===void 0?e[a]=m():e[a]}}}const Ge={name:{required:!0},disable:Boolean},ve={setup(e,{slots:a}){return()=>S("div",{class:"q-panel scroll",role:"tabpanel"},pe(a.default))}},We={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Xe=["update:modelValue","beforeTransition","transition"];function Je(){const{props:e,emit:a,proxy:m}=he(),{getCacheWithFn:f}=He();let d,n;const o=E(null),t=E(null);function g(s){const h=e.vertical===!0?"up":"left";K((m.$q.lang.rtl===!0?-1:1)*(s.direction===h?1:-1))}const P=w(()=>[[Ye,g,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),b=w(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),A=w(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),D=w(()=>`--q-transition-duration: ${e.transitionDuration}ms`),C=w(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),M=w(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),W=w(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);me(()=>e.modelValue,(s,h)=>{const k=Y(s)===!0?Z(s):-1;n!==!0&&X(k===-1?0:k<Z(h)?-1:1),o.value!==k&&(o.value=k,a("beforeTransition",s,h),Se(()=>{a("transition",s,h)}))});function Q(){K(1)}function oe(){K(-1)}function J(s){a("update:modelValue",s)}function Y(s){return s!=null&&s!==""}function Z(s){return d.findIndex(h=>h.props.name===s&&h.props.disable!==""&&h.props.disable!==!0)}function le(){return d.filter(s=>s.props.disable!==""&&s.props.disable!==!0)}function X(s){const h=s!==0&&e.animated===!0&&o.value!==-1?"q-transition--"+(s===-1?b.value:A.value):null;t.value!==h&&(t.value=h)}function K(s,h=o.value){let k=h+s;for(;k>-1&&k<d.length;){const G=d[k];if(G!==void 0&&G.props.disable!==""&&G.props.disable!==!0){X(s),n=!0,a("update:modelValue",G.props.name),setTimeout(()=>{n=!1});return}k+=s}e.infinite===!0&&d.length>0&&h!==-1&&h!==d.length&&K(s,s===-1?d.length:-1)}function _(){const s=Z(e.modelValue);return o.value!==s&&(o.value=s),!0}function ne(){const s=Y(e.modelValue)===!0&&_()&&d[o.value];return e.keepAlive===!0?[S(ke,M.value,[S(W.value===!0?f(C.value,()=>({...ve,name:C.value})):ve,{key:C.value,style:D.value},()=>s)])]:[S("div",{class:"q-panel scroll",style:D.value,key:C.value,role:"tabpanel"},[s])]}function $(){if(d.length!==0)return e.animated===!0?[S(Ce,{name:t.value},ne)]:ne()}function H(s){return d=Ae(pe(s.default,[])).filter(h=>h.props!==null&&h.props.slot===void 0&&Y(h.props.name)===!0),d.length}function x(){return d}return Object.assign(m,{next:Q,previous:oe,goTo:J}),{panelIndex:o,panelDirectives:P,updatePanelsList:H,updatePanelIndex:_,getPanelContent:$,getEnabledPanels:le,getPanels:x,isValidPanelName:Y,keepAliveProps:M,needsUniqueKeepAliveWrapper:W,goToPanelByOffset:K,goToPanel:J,nextPanel:Q,previousPanel:oe}}var L=ye({name:"QCarouselSlide",props:{...Ge,imgSrc:String},setup(e,{slots:a}){const m=w(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>S("div",{class:"q-carousel__slide",style:m.value},pe(a.default))}});const Ze=["top","right","bottom","left"],_e=["regular","flat","outline","push","unelevated"];var z=ye({name:"QCarousel",props:{...Ee,...We,...Le,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>_e.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>Ze.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...ze,...Xe],setup(e,{slots:a}){const{proxy:{$q:m}}=he(),f=qe(e,m);let d=null,n;const{updatePanelsList:o,getPanelContent:t,panelDirectives:g,goToPanel:P,previousPanel:b,nextPanel:A,getEnabledPanels:D,panelIndex:C}=Je(),{inFullscreen:M}=Me(),W=w(()=>M.value!==!0&&e.height!==void 0?{height:e.height}:{}),Q=w(()=>e.vertical===!0?"vertical":"horizontal"),oe=w(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(M.value===!0?" fullscreen":"")+(f.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${Q.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${le.value}`:"")),J=w(()=>{const $=[e.prevIcon||m.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||m.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&m.lang.rtl===!0?$.reverse():$}),Y=w(()=>e.navigationIcon||m.iconSet.carousel.navigationIcon),Z=w(()=>e.navigationActiveIcon||Y.value),le=w(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),X=w(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));me(()=>e.modelValue,()=>{e.autoplay&&K()}),me(()=>e.autoplay,$=>{$?K():d!==null&&(clearTimeout(d),d=null)});function K(){const $=je(e.autoplay)===!0?Math.abs(e.autoplay):5e3;d!==null&&clearTimeout(d),d=setTimeout(()=>{d=null,$>=0?A():b()},$)}Ve(()=>{e.autoplay&&K()}),Ue(()=>{d!==null&&clearTimeout(d)});function _($,H){return S("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${$} q-carousel__navigation--${le.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[S("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},D().map(H))])}function ne(){const $=[];if(e.navigation===!0){const H=a["navigation-icon"]!==void 0?a["navigation-icon"]:s=>S(c,{key:"nav"+s.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${s.active===!0?"":"in"}active`,...s.btnProps,onClick:s.onClick}),x=n-1;$.push(_("buttons",(s,h)=>{const k=s.props.name,G=C.value===h;return H({index:h,maxIndex:x,name:k,active:G,btnProps:{icon:G===!0?Z.value:Y.value,size:"sm",...X.value},onClick:()=>{P(k)}})}))}else if(e.thumbnails===!0){const H=e.controlColor!==void 0?` text-${e.controlColor}`:"";$.push(_("thumbnails",x=>{const s=x.props;return S("img",{key:"tmb#"+s.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${s.name===e.modelValue?"":"in"}active`+H,src:s.imgSrc||s["img-src"],onClick:()=>{P(s.name)}})}))}return e.arrows===!0&&C.value>=0&&((e.infinite===!0||C.value>0)&&$.push(S("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${Q.value} absolute flex flex-center`},[S(c,{icon:J.value[0],...X.value,onClick:b})])),(e.infinite===!0||C.value<n-1)&&$.push(S("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${Q.value} absolute flex flex-center`},[S(c,{icon:J.value[1],...X.value,onClick:A})]))),Re(a.control,$)}return()=>(n=o(a),S("div",{class:oe.value,style:W.value},[Pe("div",{class:"q-carousel__slides-container"},t(),"sl-cont",e.swipeable,()=>g.value)].concat(ne())))}});const xe=j({components:{},props:{expenseData:Object},data(){return{authStore:T(),imagesState:E(1),imageViewDialog:!1,formData:re({reason:"",details:"",amount:"",notes:"",uploads:[],request_type:"BP"}),images:[],maxFileSize:3*1024*1024,apiService:new U}},mounted(){this.$route.query.id&&this.apiService.get(`expense-control/${this.$route.query.id}`).then(e=>{Object.assign(this.formData,e.data.data)})},methods:{registerUser(){const e=new FormData;Object.keys(this.formData).forEach(a=>{e.append(a,this.formData[a])}),this.images.forEach(a=>{e.append("images",a)}),this.$emit("addExpense",e)},onAdded(e){e.forEach(a=>{if(a.size>this.maxFileSize){this.$q.notify({color:"negative",message:"File size exceeded",icon:"report_problem"});return}this.images.push(a)})},onRemoved(e){this.images=this.images.filter(a=>!e.includes(a))}}}),ea=i("div",null,null,-1),aa={class:"flex items-center gap-5 justify-end"},ta={class:"w-full"},oa={class:"q-pa-md"};function la(e,a,m,f,d,n){return r(),y("div",null,[l(O,{flat:"",class:"my-card"},{default:u(()=>[l(R,{class:"grid md:grid-cols-2 grid-cols-1 gap-5"},{default:u(()=>[l(p,{outlined:"",modelValue:e.formData.reason,"onUpdate:modelValue":a[0]||(a[0]=o=>e.formData.reason=o),label:"Reason",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.details,"onUpdate:modelValue":a[1]||(a[1]=o=>e.formData.details=o),label:"Details","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.amount,"onUpdate:modelValue":a[2]||(a[2]=o=>e.formData.amount=o),label:"Amount","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.notes,"onUpdate:modelValue":a[3]||(a[3]=o=>e.formData.notes=o),label:"Notes","bg-color":"white",dense:!0},null,8,["modelValue"]),i("div",null,[l(N,{label:"Individual upload",color:"green",multiple:"",onAdded:e.onAdded,onRemoved:e.onRemoved,style:{"max-width":"300px"}},null,8,["onAdded","onRemoved"])]),e.formData.uploads.length&&e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,color:"primary","no-caps":"",icon:"image",label:"View images",onClick:a[4]||(a[4]=o=>e.imageViewDialog=!0)})):V("",!0),ea,i("div",aa,[e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,label:"Save",color:"green",class:"px-10 py-2.5",onClick:e.registerUser},null,8,["onClick"])):V("",!0),l(c,{label:"Back",color:"red",class:"px-10 py-2.5",onClick:a[5]||(a[5]=o=>e.$router.back())})])]),_:1})]),_:1}),l(B,{modelValue:e.imageViewDialog,"onUpdate:modelValue":a[7]||(a[7]=o=>e.imageViewDialog=o)},{default:u(()=>[i("div",ta,[i("div",oa,[l(z,{animated:"",modelValue:e.imagesState,"onUpdate:modelValue":a[6]||(a[6]=o=>e.imagesState=o),arrows:"",navigation:"",infinite:""},{default:u(()=>[(r(!0),y(F,null,I(e.formData.uploads,(o,t)=>(r(),v(L,{key:t,name:t,"img-src":o},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"])])])]),_:1},8,["modelValue"])])}var na=q(xe,[["render",la]]);const ia=j({props:{expenseData:Object},data(){return{apiService:new U,authStore:T(),imagesState:E(0),units:["PCS","FEET","KG","METER","INCH"],images:[],imageViewDialog:E(!1),formData:{reason:null,request_type:"CONVINCE",transportation_location:{from:null,to:null},uploads:[],transport:null,amount:null,notes:null}}},mounted(){this.$route.query.id&&this.apiService.get(`expense-control/${this.$route.query.id}`).then(e=>{Object.assign(this.formData,e.data.data)})},methods:{registerUser(){const e=new FormData;Object.keys(this.formData).forEach(a=>{a=="transportation_location"?(e.append("transportation_location[from]",this.formData[a].from),e.append("transportation_location[to]",this.formData[a].to)):e.append(a,this.formData[a])}),this.images.forEach(a=>{e.append("images",a)}),this.$emit("addExpense",e)},onAdded(e){e.forEach(a=>{if(a.size>3*1024*1024){this.$q.notify({color:"negative",message:"File size exceeded",icon:"report_problem"});return}this.images.push(a)})},onRemoved(e){this.images=this.images.filter(a=>!e.includes(a))}}}),ra=i("div",null,null,-1),sa={class:"flex items-center gap-5 justify-end"},da={class:"w-full"},ua={class:"q-pa-md"};function ma(e,a,m,f,d,n){return r(),y("div",null,[l(O,{flat:"",class:"my-card"},{default:u(()=>[l(R,{class:"grid md:grid-cols-2 grid-cols-1 gap-5"},{default:u(()=>[l(p,{outlined:"",modelValue:e.formData.reason,"onUpdate:modelValue":a[0]||(a[0]=o=>e.formData.reason=o),label:"Reason",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.transport,"onUpdate:modelValue":a[1]||(a[1]=o=>e.formData.transport=o),label:"Transport","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.transportation_location.from,"onUpdate:modelValue":a[2]||(a[2]=o=>e.formData.transportation_location.from=o),label:"Location From","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.transportation_location.to,"onUpdate:modelValue":a[3]||(a[3]=o=>e.formData.transportation_location.to=o),label:"Location To","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.amount,"onUpdate:modelValue":a[4]||(a[4]=o=>e.formData.amount=o),label:"Total Amount","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.notes,"onUpdate:modelValue":a[5]||(a[5]=o=>e.formData.notes=o),label:"Notes","bg-color":"white",dense:!0},null,8,["modelValue"]),i("div",null,[l(N,{label:"Individual upload",color:"green",multiple:"",onAdded:e.onAdded,onRemoved:e.onRemoved,class:"w-full"},null,8,["onAdded","onRemoved"])]),e.formData.uploads.length&&e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,color:"primary","no-caps":"",icon:"image",label:"View images",onClick:a[6]||(a[6]=o=>e.confirm=!0)})):V("",!0),ra,i("div",sa,[e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,label:"Save",color:"green",class:"px-10 py-2.5",onClick:e.registerUser},null,8,["onClick"])):V("",!0),l(c,{label:"Back",color:"red",class:"px-10 py-2.5",onClick:a[7]||(a[7]=o=>e.$router.back())})])]),_:1})]),_:1}),l(B,{modelValue:e.confirm,"onUpdate:modelValue":a[9]||(a[9]=o=>e.confirm=o)},{default:u(()=>[i("div",da,[i("div",ua,[l(z,{animated:"",modelValue:e.imagesState,"onUpdate:modelValue":a[8]||(a[8]=o=>e.imagesState=o),arrows:"",navigation:"",infinite:""},{default:u(()=>[(r(!0),y(F,null,I(e.formData.uploads,(o,t)=>(r(),v(L,{key:t,name:t,"img-src":o},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"])])])]),_:1},8,["modelValue"])])}var pa=q(ia,[["render",ma]]);const ca=j({components:{SearchAddCompo:te},data(){return{authStore:T(),apiService:new U,imageViewDialog:!1,imagesState:0,images:[],formData:{request_type:"DELIVERY",transport:null,transportation_location:{from:null,to:null},amount:null,notes:null,project:null,client:null,uploads:[],labour_amount:null,labour_quantity:null},project_data:{label:null,value:null},client_data:{label:null,value:null},units:["PCS","FEET","KG","METER","INCH"],labour:E(!1)}},mounted(){this.$route.query.id&&this.apiService.get(`expense-control/${this.$route.query.id}`).then(e=>{Object.assign(this.formData,e.data.data),e.data.data.project&&(this.project_data.label=e.data.data.project.title,this.project_data.value=e.data.data.project._id,e.data.data.client&&(this.client_data.label=e.data.data.client.first_name+" "+e.data.data.client.last_name,this.client_data.value=e.data.data.client._id))})},methods:{registerUser(){const e=new FormData;Object.keys(this.formData).forEach(a=>{a=="transportation_location"?(e.append("transportation_location[from]",this.formData[a].from),e.append("transportation_location[to]",this.formData[a].to)):e.append(a,this.formData[a])}),this.images.forEach(a=>{e.append("images",a)}),this.$emit("addExpense",e)},onAdded(e){e.forEach(a=>{if(a.size>3*1024*1024){this.$q.notify({color:"negative",message:"File size exceeded",icon:"report_problem"});return}this.images.push(a)})},onRemoved(e){this.images=this.images.filter(a=>!e.includes(a))}}}),fa={class:"col-span-2"},ga={key:0,class:"col-span-2 grid md:grid-cols-2 grid-cols-1 gap-5"},va=i("div",null,null,-1),ba={class:"flex items-center gap-5 justify-end"},ha={class:"w-full"},ya={class:"q-pa-md"};function Va(e,a,m,f,d,n){const o=ae("SearchAddCompo");return r(),y("div",null,[l(O,{flat:"",class:"my-card"},{default:u(()=>[l(R,{class:"grid md:grid-cols-2 grid-cols-1 gap-5"},{default:u(()=>[l(o,{data:e.client_data,onSelected:a[0]||(a[0]=t=>e.formData.client=t),label:"Client",api:"users",userType:"CLIENT"},null,8,["data"]),l(o,{data:e.project_data,for:"project",onSelected:a[1]||(a[1]=t=>e.formData.project=t),label:"Project",api:"project-control"},null,8,["data"]),l(p,{outlined:"",modelValue:e.formData.transport,"onUpdate:modelValue":a[2]||(a[2]=t=>e.formData.transport=t),label:"Transport","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.transportation_location.from,"onUpdate:modelValue":a[3]||(a[3]=t=>e.formData.transportation_location.from=t),label:"Location From","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.transportation_location.to,"onUpdate:modelValue":a[4]||(a[4]=t=>e.formData.transportation_location.to=t),label:"Location To","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.amount,"onUpdate:modelValue":a[5]||(a[5]=t=>e.formData.amount=t),label:"Amount","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.notes,"onUpdate:modelValue":a[6]||(a[6]=t=>e.formData.notes=t),label:"Notes","bg-color":"white",dense:!0},null,8,["modelValue"]),i("div",fa,[l(Oe,{"left-label":"",modelValue:e.labour,"onUpdate:modelValue":a[7]||(a[7]=t=>e.labour=t),label:"Labour"},null,8,["modelValue"])]),e.labour?(r(),y("div",ga,[l(p,{outlined:"",modelValue:e.formData.labour_quantity,"onUpdate:modelValue":a[8]||(a[8]=t=>e.formData.labour_quantity=t),label:"Labour Quantity","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.labour_amount,"onUpdate:modelValue":a[9]||(a[9]=t=>e.formData.labour_amount=t),label:"Amount","bg-color":"white",dense:!0},null,8,["modelValue"])])):V("",!0),i("div",null,[l(N,{label:"Individual upload",color:"green",multiple:"",onAdded:e.onAdded,onRemoved:e.onRemoved,class:"w-full"},null,8,["onAdded","onRemoved"])]),e.formData.uploads.length&&e.authStore.canAccess("expense_write")?(r(),v(c,{key:1,"no-caps":"",color:"primary",icon:"image",label:"View images",onClick:a[10]||(a[10]=t=>e.imageViewDialog=!0)})):V("",!0),va,i("div",ba,[e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,label:"Save",color:"green",class:"px-10 py-2.5",onClick:e.registerUser},null,8,["onClick"])):V("",!0),l(c,{label:"Back",color:"red",class:"px-10 py-2.5",onClick:a[11]||(a[11]=t=>e.$router.back())})])]),_:1})]),_:1}),l(B,{modelValue:e.imageViewDialog,"onUpdate:modelValue":a[13]||(a[13]=t=>e.imageViewDialog=t)},{default:u(()=>[i("div",ha,[i("div",ya,[l(z,{animated:"",modelValue:e.imagesState,"onUpdate:modelValue":a[12]||(a[12]=t=>e.imagesState=t),arrows:"",navigation:"",infinite:""},{default:u(()=>[(r(!0),y(F,null,I(e.formData.uploads,(t,g)=>(r(),v(L,{key:g,name:g,"img-src":t},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"])])])]),_:1},8,["modelValue"])])}var Da=q(ca,[["render",Va]]);const $a=j({components:{SearchAddCompo:te},props:{expenseData:Object},data(){return{authStore:T(),apiService:new U,imagesState:0,imageViewDialog:!1,formData:re({product:{id:null},reason:"",details:"",amount:"",notes:"",request_type:"FACTORY",uploads:[]}),images:[],product_data:{label:null,value:null}}},mounted(){this.$route.query.id&&this.apiService.get(`expense-control/${this.$route.query.id}`).then(e=>{Object.assign(this.formData,e.data.data),e.data.data.product&&(this.product_data.label=e.data.data.product.id.title,this.product_data.value=e.data.data.product.id._id)})},methods:{registerUser(){const e=new FormData;Object.keys(this.formData).forEach(a=>{a=="product"?e.append("product[id]",this.formData[a].id):e.append(a,this.formData[a])}),this.images.forEach(a=>{e.append("images",a)}),this.$emit("addExpense",e)},onAdded(e){e.forEach(a=>{if(a.size>3*1024*1024){this.$q.notify({color:"negative",message:"File size exceeded",icon:"report_problem"});return}this.images.push(a)})},onRemoved(e){this.images=this.images.filter(a=>!e.includes(a))}}}),wa=i("div",null,null,-1),Sa={class:"flex items-center gap-5 justify-end"},Ca={class:"w-full"},Aa={class:"q-pa-md"};function ka(e,a,m,f,d,n){const o=ae("SearchAddCompo");return r(),y("div",null,[l(O,{flat:"",class:"my-card"},{default:u(()=>[l(R,{class:"grid md:grid-cols-2 grid-cols-1 gap-5"},{default:u(()=>[l(o,{for:"product",data:e.product_data,onSelected:a[0]||(a[0]=t=>e.formData.product.id=t),label:"Choose product",api:"product-control"},null,8,["data"]),l(p,{outlined:"",modelValue:e.formData.reason,"onUpdate:modelValue":a[1]||(a[1]=t=>e.formData.reason=t),label:"Reason",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.details,"onUpdate:modelValue":a[2]||(a[2]=t=>e.formData.details=t),label:"Details","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.amount,"onUpdate:modelValue":a[3]||(a[3]=t=>e.formData.amount=t),label:"Amount","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.notes,"onUpdate:modelValue":a[4]||(a[4]=t=>e.formData.notes=t),label:"Notes","bg-color":"white",dense:!0},null,8,["modelValue"]),i("div",null,[l(N,{label:"Individual upload",color:"green",multiple:"",onAdded:e.onAdded,onRemoved:e.onRemoved,class:"w-full"},null,8,["onAdded","onRemoved"])]),e.formData.uploads.length&&e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,"no-caps":"",color:"primary",icon:"image",label:"View images",onClick:a[5]||(a[5]=t=>e.imageViewDialog=!0)})):V("",!0),wa,i("div",Sa,[e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,label:"Save",color:"green",class:"px-10 py-2.5",onClick:e.registerUser},null,8,["onClick"])):V("",!0),l(c,{label:"Back",color:"red",class:"px-10 py-2.5",onClick:a[6]||(a[6]=t=>e.$router.back())})])]),_:1})]),_:1}),l(B,{modelValue:e.imageViewDialog,"onUpdate:modelValue":a[8]||(a[8]=t=>e.imageViewDialog=t)},{default:u(()=>[i("div",Ca,[i("div",Aa,[l(z,{animated:"",modelValue:e.imagesState,"onUpdate:modelValue":a[7]||(a[7]=t=>e.imagesState=t),arrows:"",navigation:"",infinite:""},{default:u(()=>[(r(!0),y(F,null,I(e.formData.uploads,(t,g)=>(r(),v(L,{key:g,name:g,"img-src":t},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"])])])]),_:1},8,["modelValue"])])}var Ea=q($a,[["render",ka]]);const qa=j({components:{SearchAddCompo:te},props:{expenseData:Object},data(){return{authStore:T(),apiService:new U,imagesState:0,images:[],imageViewDialog:!1,formData:re({request_type:"LABOUR",project:null,labour_quantity:null,amount:null,notes:null,uploads:[]}),project_data:{label:null,value:null}}},mounted(){this.$route.query.id&&this.apiService.get(`expense-control/${this.$route.query.id}`).then(e=>{Object.assign(this.formData,e.data.data),e.data.data.project&&(this.project_data.label=e.data.data.project.title,this.project_data.value=e.data.data.project._id)})},methods:{registerUser(){const e=new FormData;Object.keys(this.formData).forEach(a=>{e.append(a,this.formData[a])}),this.images.forEach(a=>{e.append("images",a)}),this.$emit("addExpense",e)},onAdded(e){e.forEach(a=>{if(a.size>3*1024*1024){this.$q.notify({color:"negative",message:"File size exceeded",icon:"report_problem"});return}this.images.push(a)})},onRemoved(e){this.images=this.images.filter(a=>!e.includes(a))}}}),Ua=i("div",null,null,-1),Pa={class:"flex items-center gap-5 justify-end"},ja={class:"w-full"},Ra={class:"q-pa-md"};function Oa(e,a,m,f,d,n){const o=ae("SearchAddCompo");return r(),y("div",null,[l(O,{flat:"",class:"my-card"},{default:u(()=>[l(R,{class:"grid md:grid-cols-2 grid-cols-1 gap-5"},{default:u(()=>[l(o,{data:e.project_data,for:"project",onSelected:a[0]||(a[0]=t=>e.formData.project=t),label:"Project",api:"project-control"},null,8,["data"]),Te(),l(p,{outlined:"",modelValue:e.formData.labour_quantity,"onUpdate:modelValue":a[1]||(a[1]=t=>e.formData.labour_quantity=t),label:"Labour quantity",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.amount,"onUpdate:modelValue":a[2]||(a[2]=t=>e.formData.amount=t),label:"Amount","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.notes,"onUpdate:modelValue":a[3]||(a[3]=t=>e.formData.notes=t),label:"Notes","bg-color":"white",dense:!0},null,8,["modelValue"]),i("div",null,[l(N,{label:"Individual upload",color:"green",multiple:"",onAdded:e.onAdded,onRemoved:e.onRemoved,class:"w-full"},null,8,["onAdded","onRemoved"])]),e.formData.uploads.length&&e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,"no-caps":"",color:"primary",icon:"image",label:"View images",onClick:a[4]||(a[4]=t=>e.imageViewDialog=!0)})):V("",!0),Ua,i("div",Pa,[e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,label:"Save",color:"green",class:"px-10 py-2.5",onClick:e.registerUser},null,8,["onClick"])):V("",!0),l(c,{label:"Back",color:"red",class:"px-10 py-2.5",onClick:a[5]||(a[5]=t=>e.$router.back())})])]),_:1})]),_:1}),l(B,{modelValue:e.imageViewDialog,"onUpdate:modelValue":a[7]||(a[7]=t=>e.imageViewDialog=t)},{default:u(()=>[i("div",ja,[i("div",Ra,[l(z,{animated:"",modelValue:e.imagesState,"onUpdate:modelValue":a[6]||(a[6]=t=>e.imagesState=t),arrows:"",navigation:"",infinite:""},{default:u(()=>[(r(!0),y(F,null,I(e.formData.uploads,(t,g)=>(r(),v(L,{key:g,name:g,"img-src":t},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"])])])]),_:1},8,["modelValue"])])}var Ta=q(qa,[["render",Oa]]);const Fa=j({components:{},data(){return{authStore:T(),imagesState:E(0),apiService:new U,imageViewDialog:!1,formData:re({reason:"",amount:"",notes:"",uploads:[],request_type:"MARKETING"}),images:[]}},mounted(){this.$route.query.id&&this.apiService.get(`expense-control/${this.$route.query.id}`).then(e=>{Object.assign(this.formData,e.data.data)})},methods:{registerUser(){const e=new FormData;Object.keys(this.formData).forEach(a=>{e.append(a,this.formData[a])}),this.images.forEach(a=>{e.append("images",a)}),this.$emit("addExpense",e)},onAdded(e){e.forEach(a=>{if(a.size>3*1024*1024){this.$q.notify({color:"negative",message:"File size exceeded",icon:"report_problem"});return}this.images.push(a)})},onRemoved(e){this.images=this.images.filter(a=>!e.includes(a))}}}),Ia=i("div",null,null,-1),Ba={class:"flex items-center gap-5 justify-end"},Na={class:"w-full"},La={class:"q-pa-md"};function za(e,a,m,f,d,n){return r(),y("div",null,[l(O,{flat:"",class:"my-card"},{default:u(()=>[l(R,{class:"grid md:grid-cols-2 grid-cols-1 gap-5"},{default:u(()=>[l(p,{outlined:"",modelValue:e.formData.reason,"onUpdate:modelValue":a[0]||(a[0]=o=>e.formData.reason=o),label:"Reason",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.amount,"onUpdate:modelValue":a[1]||(a[1]=o=>e.formData.amount=o),label:"Amount","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.notes,"onUpdate:modelValue":a[2]||(a[2]=o=>e.formData.notes=o),label:"Notes","bg-color":"white",dense:!0},null,8,["modelValue"]),i("div",null,[l(N,{label:"Individual upload",color:"green",multiple:"",onAdded:e.onAdded,onRemoved:e.onRemoved,class:"w-full"},null,8,["onAdded","onRemoved"])]),e.formData.uploads.length&&e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,"no-caps":"",color:"primary",icon:"image",label:"View images",onClick:a[3]||(a[3]=o=>e.imageViewDialog=!0)})):V("",!0),Ia,i("div",Ba,[e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,label:"Save",color:"green",class:"px-10 py-2.5",onClick:e.registerUser},null,8,["onClick"])):V("",!0),l(c,{label:"Back",color:"red",class:"px-10 py-2.5",onClick:a[4]||(a[4]=o=>e.$router.back())})])]),_:1})]),_:1}),l(B,{modelValue:e.imageViewDialog,"onUpdate:modelValue":a[6]||(a[6]=o=>e.imageViewDialog=o)},{default:u(()=>[i("div",Na,[i("div",La,[l(z,{animated:"",modelValue:e.imagesState,"onUpdate:modelValue":a[5]||(a[5]=o=>e.imagesState=o),arrows:"",navigation:"",infinite:""},{default:u(()=>[(r(!0),y(F,null,I(e.formData.uploads,(o,t)=>(r(),v(L,{key:t,name:t,"img-src":o},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"])])])]),_:1},8,["modelValue"])])}var Ma=q(Fa,[["render",za]]);const Qa=j({data(){return{authStore:T(),imagesState:E(0),apiService:new U,imageViewDialog:!1,formData:{amount:"",uploads:[],request_type:"MOBILE_ALLOWANCE"},images:[]}},mounted(){this.$route.query.id&&this.apiService.get(`expense-control/${this.$route.query.id}`).then(e=>{Object.assign(this.formData,e.data.data)})},methods:{registerUser(){const e=new FormData;Object.keys(this.formData).forEach(a=>{e.append(a,this.formData[a])}),this.images.forEach(a=>{e.append("images",a)}),this.$emit("addExpense",e)},onAdded(e){e.forEach(a=>{if(a.size>3*1024*1024){this.$q.notify({color:"negative",message:"File size exceeded",icon:"report_problem"});return}this.images.push(a)})},onRemoved(e){this.images=this.images.filter(a=>!e.includes(a))}}}),Ka=i("div",null,null,-1),Ya={class:"flex items-center gap-5 justify-end"},Ha={class:"w-full"},Ga={class:"q-pa-md"};function Wa(e,a,m,f,d,n){return r(),y("div",null,[l(O,{flat:"",class:"my-card"},{default:u(()=>[l(R,{class:"grid md:grid-cols-2 grid-cols-1 gap-5"},{default:u(()=>[l(p,{outlined:"",modelValue:e.formData.amount,"onUpdate:modelValue":a[0]||(a[0]=o=>e.formData.amount=o),label:"Amount",dense:!0},null,8,["modelValue"]),i("div",null,[l(N,{label:"Individual upload",color:"green",multiple:"",onAdded:e.onAdded,onRemoved:e.onRemoved,class:"w-full"},null,8,["onAdded","onRemoved"])]),e.formData.uploads.length&&e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,"no-caps":"",color:"primary",icon:"image",label:"View images",onClick:a[1]||(a[1]=o=>e.imageViewDialog=!0)})):V("",!0),Ka,i("div",Ya,[e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,label:"Save",color:"green",class:"px-10 py-2.5",onClick:e.registerUser},null,8,["onClick"])):V("",!0),l(c,{label:"Back",color:"red",class:"px-10 py-2.5",onClick:a[2]||(a[2]=o=>e.$router.back())})])]),_:1})]),_:1}),l(B,{modelValue:e.imageViewDialog,"onUpdate:modelValue":a[4]||(a[4]=o=>e.imageViewDialog=o)},{default:u(()=>[i("div",Ha,[i("div",Ga,[l(z,{animated:"",modelValue:e.imagesState,"onUpdate:modelValue":a[3]||(a[3]=o=>e.imagesState=o),arrows:"",navigation:"",infinite:""},{default:u(()=>[(r(!0),y(F,null,I(e.formData.uploads,(o,t)=>(r(),v(L,{key:t,name:t,"img-src":o},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"])])])]),_:1},8,["modelValue"])])}var Xa=q(Qa,[["render",Wa]]);const Ja=j({components:{SearchAddCompo:te},data(){return{authStore:T(),apiService:new U,formData:{payer:null,reason:null,details:null,request_type:"OFFICE",amount:null,uploads:[]},imageViewDialog:!1,imagesState:0,images:[],payer_data:{label:"",value:""}}},mounted(){this.$route.query.id&&this.apiService.get(`expense-control/${this.$route.query.id}`).then(e=>{Object.assign(this.formData,e.data.data),e.data.data.payer&&(this.payer_data.label=e.data.data.payer.first_name+" "+e.data.data.payer.last_name,this.payer_data.value=e.data.data.payer._id)})},methods:{registerUser(){const e=new FormData;Object.keys(this.formData).forEach(a=>{e.append(a,this.formData[a])}),this.images.forEach(a=>{e.append("images",a)}),this.$emit("addExpense",e)},onAdded(e){e.forEach(a=>{if(a.size>3*1024*1024){this.$q.notify({color:"negative",message:"File size exceeded",icon:"report_problem"});return}this.images.push(a)})},onRemoved(e){this.images=this.images.filter(a=>!e.includes(a))}}}),Za=i("div",null,null,-1),_a={class:"flex items-center gap-5 justify-end"},xa={class:"w-full"},et={class:"q-pa-md"};function at(e,a,m,f,d,n){const o=ae("SearchAddCompo");return r(),y("div",null,[l(O,{flat:"",class:"my-card"},{default:u(()=>[l(R,{class:"grid md:grid-cols-2 grid-cols-1 gap-5"},{default:u(()=>[l(p,{outlined:"",modelValue:e.formData.reason,"onUpdate:modelValue":a[0]||(a[0]=t=>e.formData.reason=t),label:"Reason",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.amount,"onUpdate:modelValue":a[1]||(a[1]=t=>e.formData.amount=t),label:"Amount",dense:!0},null,8,["modelValue"]),l(o,{label:"Paid to",data:e.payer_data,api:"users",onSelected:a[2]||(a[2]=t=>e.formData.payer=t)},null,8,["data"]),l(p,{outlined:"",modelValue:e.formData.details,"onUpdate:modelValue":a[3]||(a[3]=t=>e.formData.details=t),label:"Details","bg-color":"white",dense:!0},null,8,["modelValue"]),i("div",null,[l(N,{label:"Individual upload",color:"green",multiple:"",onAdded:e.onAdded,onRemoved:e.onRemoved,class:"w-full"},null,8,["onAdded","onRemoved"])]),e.formData.uploads.length&&e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,"no-caps":"",color:"primary",icon:"image",label:"View images",onClick:a[4]||(a[4]=t=>e.imageViewDialog=!0)})):V("",!0),Za,i("div",_a,[e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,label:"Save",color:"green",class:"px-10 py-2.5",onClick:e.registerUser},null,8,["onClick"])):V("",!0),l(c,{label:"Back",color:"red",class:"px-10 py-2.5",onClick:a[5]||(a[5]=t=>e.$router.back())})])]),_:1}),l(B,{modelValue:e.imageViewDialog,"onUpdate:modelValue":a[7]||(a[7]=t=>e.imageViewDialog=t)},{default:u(()=>[i("div",xa,[i("div",et,[l(z,{animated:"",modelValue:e.imagesState,"onUpdate:modelValue":a[6]||(a[6]=t=>e.imagesState=t),arrows:"",navigation:"",infinite:""},{default:u(()=>[(r(!0),y(F,null,I(e.formData.uploads,(t,g)=>(r(),v(L,{key:g,name:g,"img-src":t},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"])])])]),_:1},8,["modelValue"])]),_:1})])}var tt=q(Ja,[["render",at]]);const ot=j({components:{},props:{expenseData:Object},data(){return{authStore:T(),apiService:new U,imagesState:0,maxFileSize:3*1024*1024,images:[],imageViewDialog:!1,data:{request_type:"OTHERS",reason:null,amount:null,notes:null,uploads:[]}}},mounted(){this.$route.query.id&&this.apiService.get(`expense-control/${this.$route.query.id}`).then(e=>{Object.assign(this.data,e.data.data)})},methods:{registerUser(){const e=new FormData;Object.keys(this.data).forEach(a=>{e.append(a,this.data[a])}),this.images.forEach(a=>{e.append("images",a)}),this.$emit("addExpense",e)},onAdded(e){e.forEach(a=>{if(a.size>this.maxFileSize){this.$q.notify({color:"negative",message:"File size exceeded",icon:"report_problem"});return}this.images.push(a)})},onRemoved(e){this.images=this.images.filter(a=>!e.includes(a))}}}),lt=i("div",null,null,-1),nt={class:"flex items-center gap-5 justify-end"},it={class:"w-full"},rt={class:"q-pa-md"};function st(e,a,m,f,d,n){return r(),y("div",null,[l(O,{flat:"",class:"my-card"},{default:u(()=>[l(R,{class:"grid md:grid-cols-2 grid-cols-1 gap-5"},{default:u(()=>[l(p,{outlined:"",modelValue:e.data.reason,"onUpdate:modelValue":a[0]||(a[0]=o=>e.data.reason=o),label:"Reason",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.data.amount,"onUpdate:modelValue":a[1]||(a[1]=o=>e.data.amount=o),label:"Total Amount","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.data.notes,"onUpdate:modelValue":a[2]||(a[2]=o=>e.data.notes=o),label:"Notes","bg-color":"white",dense:!0},null,8,["modelValue"]),i("div",null,[l(N,{label:"Individual upload",color:"green",multiple:"",onAdded:e.onAdded,onRemoved:e.onRemoved,class:"w-full"},null,8,["onAdded","onRemoved"])]),e.data.uploads.length&&e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,"no-caps":"",color:"primary",icon:"image",label:"View images",onClick:a[3]||(a[3]=o=>e.imageViewDialog=!0)})):V("",!0),lt,i("div",nt,[e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,label:"Save",color:"green",class:"px-10 py-2.5",onClick:e.registerUser},null,8,["onClick"])):V("",!0),l(c,{label:"Back",color:"red",class:"px-10 py-2.5",onClick:a[4]||(a[4]=o=>e.$router.back())})])]),_:1})]),_:1}),l(B,{modelValue:e.imageViewDialog,"onUpdate:modelValue":a[6]||(a[6]=o=>e.imageViewDialog=o)},{default:u(()=>[i("div",it,[i("div",rt,[l(z,{animated:"",modelValue:e.imagesState,"onUpdate:modelValue":a[5]||(a[5]=o=>e.imagesState=o),arrows:"",navigation:"",infinite:""},{default:u(()=>[(r(!0),y(F,null,I(e.data.uploads,(o,t)=>(r(),v(L,{key:t,name:t,"img-src":o},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"])])])]),_:1},8,["modelValue"])])}var dt=q(ot,[["render",st]]);const ut=j({name:"ProductPurchase",components:{SearchAddCompo:te},data(){return{authStore:T(),imagesState:0,imageViewDialog:E(!1),maxFileSize:3*1024*1024,images:[],type:E("pcs"),units:["PCS","FEET","KG","METER","INCH"],apiService:new U,formData:{product:{id:null,quantity:null,category:null},project:null,vendor:null,location:null,amount:null,amount_paid:null,amount_per:null,amount_per_unit:null,uploads:[],request_type:"PRODUCT_PURCHASE"},product_data:{label:null,value:null},project_data:{label:null,value:null},vendor_data:{label:null,value:null},product_category_data:{label:null,value:null}}},mounted(){this.$route.query.id&&this.apiService.get(`expense-control/${this.$route.query.id}`).then(e=>{Object.assign(this.formData,e.data.data),e.data.data.product&&(this.product_data.label=e.data.data.product.id.title,this.product_data.value=e.data.data.product.id._id,e.data.data.project&&(this.project_data.label=e.data.data.project.title,this.project_data.value=e.data.data.project._id,e.data.data.vendor&&(this.vendor_data.label=e.data.data.vendor.first_name+" "+e.data.data.vendor.last_name,this.vendor_data.value=e.data.data.vendor._id,e.data.data.product.category&&(this.product_category_data.label=e.data.data.product.category.title,this.product_category_data.value=e.data.data.product.category._id))))})},methods:{registerUser(){const e=new FormData;Object.keys(this.formData).forEach(a=>{a=="product"?(e.append("product[id]",this.formData[a].id),e.append("product[quantity]",this.formData[a].quantity),e.append("product[category]",this.formData[a].category)):e.append(a,this.formData[a])}),this.images.forEach(a=>{e.append("images",a)}),this.$emit("addExpense",e)},onAdded(e){e.forEach(a=>{if(a.size>3*1024*1024){this.$q.notify({color:"negative",message:"File size exceeded",icon:"report_problem"});return}this.images.push(a)})},onRemoved(e){this.images=this.images.filter(a=>!e.includes(a))}}}),mt={class:"flex"},pt=i("div",null,null,-1),ct={class:"flex items-center gap-5 justify-end"},ft={class:"w-full"},gt={class:"q-pa-md"};function vt(e,a,m,f,d,n){const o=ae("SearchAddCompo");return r(),y("div",null,[l(O,{flat:"",class:"my-card"},{default:u(()=>[l(R,{class:"grid md:grid-cols-2 grid-cols-1 gap-5"},{default:u(()=>[l(o,{for:"product",data:e.product_data,onSelected:a[0]||(a[0]=t=>e.formData.product.id=t),label:"Choose product",api:"product-control"},null,8,["data"]),l(o,{for:"product",data:e.product_category_data,onSelected:a[1]||(a[1]=t=>e.formData.product.category=t),label:"Choose product Category",createApi:"product-control/category"},null,8,["data"]),l(p,{outlined:"",modelValue:e.formData.product.quantity,"onUpdate:modelValue":a[2]||(a[2]=t=>e.formData.product.quantity=t),placeholder:"product quantity",dense:!0},null,8,["modelValue"]),l(o,{data:e.vendor_data,onSelected:a[3]||(a[3]=t=>e.formData.vendor=t),label:"Vendor",api:"users",userType:"VENDOR"},null,8,["data"]),l(o,{data:e.project_data,for:"project",onSelected:a[4]||(a[4]=t=>e.formData.project=t),label:"Project",api:"project-control"},null,8,["data"]),l(p,{outlined:"",modelValue:e.formData.location,"onUpdate:modelValue":a[5]||(a[5]=t=>e.formData.location=t),placeholder:"Location","bg-color":"white",dense:!0},null,8,["modelValue"]),i("div",mt,[l(p,{outlined:"",modelValue:e.formData.amount_per,"onUpdate:modelValue":a[6]||(a[6]=t=>e.formData.amount_per=t),label:"Amount per","bg-color":"white",dense:!0,class:"w-3/4"},null,8,["modelValue"]),l(be,{class:"bg-white w-1/4",outlined:"",modelValue:e.formData.amount_per_unit,"onUpdate:modelValue":a[7]||(a[7]=t=>e.formData.amount_per_unit=t),options:e.units,dense:!0,label:"Units"},null,8,["modelValue","options"])]),l(p,{outlined:"",modelValue:e.formData.amount,"onUpdate:modelValue":a[8]||(a[8]=t=>e.formData.amount=t),label:"Total Amount","bg-color":"white",dense:!0},null,8,["modelValue"]),l(p,{outlined:"",modelValue:e.formData.amount_paid,"onUpdate:modelValue":a[9]||(a[9]=t=>e.formData.amount_paid=t),label:"Paid Amount","bg-color":"white",dense:!0},null,8,["modelValue"]),i("div",null,[l(N,{label:"Individual upload",color:"green",multiple:"",onAdded:e.onAdded,onRemoved:e.onRemoved,class:"w-full"},null,8,["onAdded","onRemoved"])]),e.formData.uploads.length&&e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,"no-caps":"",color:"primary",icon:"image",label:"View images",onClick:a[10]||(a[10]=t=>e.imageViewDialog=!0)})):V("",!0),pt,i("div",ct,[e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,label:"Save",color:"green",class:"px-10 py-2.5",onClick:e.registerUser},null,8,["onClick"])):V("",!0),l(c,{label:"Back",color:"red",class:"px-10 py-2.5",onClick:a[11]||(a[11]=t=>e.$router.back())})])]),_:1})]),_:1}),l(B,{modelValue:e.imageViewDialog,"onUpdate:modelValue":a[13]||(a[13]=t=>e.imageViewDialog=t)},{default:u(()=>[i("div",ft,[i("div",gt,[l(z,{animated:"",modelValue:e.imagesState,"onUpdate:modelValue":a[12]||(a[12]=t=>e.imagesState=t),arrows:"",navigation:"",infinite:""},{default:u(()=>[(r(!0),y(F,null,I(e.formData.uploads,(t,g)=>(r(),v(L,{key:g,name:g,"img-src":t},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"])])])]),_:1},8,["modelValue"])])}var bt=q(ut,[["render",vt]]);const ht=j({components:{},data(){return{authStore:T(),apiService:new U,formData:{request_type:"SALARY",amount:null}}},mounted(){this.$route.query.id&&this.apiService.get(`expense-control/${this.$route.query.id}`).then(e=>{Object.assign(this.formData,e.data.data)})},methods:{registerUser(){const e=new FormData;Object.keys(this.formData).forEach(a=>{e.append(a,this.formData[a])}),this.$emit("addExpense",e)}}}),yt=i("div",null,null,-1),Vt={class:"flex items-center gap-5 justify-end"};function Dt(e,a,m,f,d,n){return r(),y("div",null,[l(O,{flat:"",class:"my-card"},{default:u(()=>[l(R,{class:"grid md:grid-cols-2 grid-cols-1 gap-5"},{default:u(()=>[yt,i("div",Vt,[e.authStore.canAccess("expense_write")?(r(),v(c,{key:0,label:"Save",color:"green",class:"px-10 py-2.5",onClick:e.registerUser},null,8,["onClick"])):V("",!0),l(c,{label:"Back",color:"red",class:"px-10 py-2.5",onClick:a[0]||(a[0]=o=>e.$router.back())})])]),_:1})]),_:1})])}var $t=q(ht,[["render",Dt]]);const wt={components:{ProductPurchase:bt,OfficeExpense:tt,DeliveryExp:Da,ConveyanceExp:pa,FactoryExp:Ea,BpExp:na,LabourExp:Ta,OtherBill:dt,SalaryExp:$t,MobileAllowance:Xa,MarketingExp:Ma},setup(){const e=E({label:"Product Purchase",value:"ProductPurchase"}),a=new U,m=Qe(),f=Fe(),d=Ie(),n=[{label:"Product Purchase",value:"ProductPurchase",type:"PRODUCT_PURCHASE"},{label:"Office",value:"OfficeExpense",type:"OFFICE"},{label:"Delivery",value:"DeliveryExp",type:"DELIVERY"},{label:"Conveyance",value:"ConveyanceExp",type:"CONVINCE"},{label:"Factory",value:"FactoryExp",type:"FACTORY"},{label:"BP",value:"BpExp",type:"BP"},{label:"Labour",value:"LabourExp",type:"LABOUR"},{label:"Marketing",value:"MarketingExp",type:"MARKETING"},{label:"Mobile Allowance",value:"MobileAllowance",type:"MOBILE_ALLOWANCE"},{label:"Salary Received Receipt",value:"SalaryExp",type:"SALARY"},{label:"Other Bill",value:"OtherBill",type:"OTHERS"}],o=E(null);async function t(g){if(!navigator.geolocation){m.notify({message:"Allow Geolocation, or you can't continue",color:"red",position:"top"});return}navigator.geolocation.getCurrentPosition(async P=>{try{if(d.query.id){console.log("\u{1F680} ~ file: AddExpense.vue:113 ~ navigator.geolocation.getCurrentPosition ~ formData:",g),await a.patch(`/expense-control/${d.query.id}`,g,{headers:{"Content-Type":"multipart/form-data"}}),m.notify({message:"Expense updated successfully",color:"green",position:"top"}),f.back();return}const{latitude:b,longitude:A}=P.coords;g.creator_location={latitude:b,longitude:A},g.append("creator_location[latitude]",b),g.append("creator_location[longitude]",A),await a.post("/expense-control/create",g),m.notify({message:"Expense created successfully",color:"green",position:"top"}),f.back()}catch(b){console.log("\u{1F680} ~ file: AddExpense.vue:138 ~ navigator.geolocation.getCurrentPosition ~ error:",b),m.notify({message:"Something went wrong",color:"red",position:"top"})}})}return Ve(()=>{d.query.type&&(e.value=n.find(g=>g.type===d.query.type))}),{expenseDetails:o,createExpance:t,activeCompo:e,options:n}}},St={class:"px-5"},Ct={class:"row"},At={class:"col-lg-6"},kt={class:"px-4"};function Et(e,a,m,f,d,n){return r(),y("main",St,[i("div",Ct,[i("section",At,[i("div",kt,[l(be,{disable:!!e.$route.query.id,class:"bg-white",outlined:"",modelValue:f.activeCompo,"onUpdate:modelValue":a[0]||(a[0]=o=>f.activeCompo=o),options:f.options,dense:!0,label:"Choose expense type"},null,8,["disable","modelValue","options"])]),(r(),v(Be(f.activeCompo.value),{onAddExpense:f.createExpance},null,40,["onAddExpense"]))])])])}var zt=q(wt,[["render",Et]]);export{zt as default};
