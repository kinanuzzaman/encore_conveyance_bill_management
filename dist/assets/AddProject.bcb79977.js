import{_ as u,d as m,a4 as p,o as n,a as f,e as l,f as o,a6 as s,ay as c,aw as v,a8 as d,a5 as V,Q as i,a7 as D}from"./index.5b2acc78.js";import{S as h}from"./SearchAddCompo.f8c630c2.js";import{A as y}from"./api-service.e4a3f494.js";import{u as g}from"./auth.store.b2378202.js";import"./selection.9088e168.js";import"./QSelect.fbaf293c.js";import"./format.2a3572e1.js";import"./axios.33769ef8.js";const S=m({name:"AddProject",components:{SearchAddCompo:h},data(){return{apiService:new y,authStore:g(),formData:{title:"",type:"",description:"",address:"",budget:"",vendor:"",client:"",start_date:"",end_date:""},vendor_data:{label:null,value:null},client_data:{label:null,value:null}}},mounted(){this.$route.query.id&&this.apiService.get(`project-control/${this.$route.query.id}`).then(e=>{Object.assign(this.formData,e.data.data),e.data.data.vendor&&(this.vendor_data.label=e.data.data.vendor.first_name+" "+e.data.data.vendor.last_name,this.vendor_data.value=e.data.data.vendor._id,e.data.data.client&&(this.client_data.label=e.data.data.client.first_name+" "+e.data.data.client.last_name,this.client_data.value=e.data.data.client._id))})},methods:{async registerUser(){if(this.$route.query.id){await this.apiService.patch(`project-control/${this.$route.query.id}`,this.formData),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Project Updated Successfully",position:"top",timeout:2e3}),this.$router.push("/projects");return}else{await this.apiService.post("project-control/create",this.formData),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Project Added Successfully",position:"top",timeout:2e3}),this.$router.push("/projects");return}}}}),b={class:"px-4 row"},j={class:"col-lg-6 px-5"},C=l("div",{class:"text-2xl font-semibold mx-5"},"Add Projects",-1),$={class:"flex items-end justify-end"};function A(e,t,U,k,w,P){const r=p("SearchAddCompo");return n(),f("div",b,[l("section",j,[o(c,{flat:""},{default:s(()=>[C,o(v,{class:"grid md:grid-cols-2 grid-cols-1 gap-5"},{default:s(()=>[o(d,{outlined:"",modelValue:e.formData.title,"onUpdate:modelValue":t[0]||(t[0]=a=>e.formData.title=a),placeholder:"Project Name",dense:!0},null,8,["modelValue"]),o(d,{outlined:"",modelValue:e.formData.type,"onUpdate:modelValue":t[1]||(t[1]=a=>e.formData.type=a),placeholder:"Project Type",dense:!0},null,8,["modelValue"]),o(d,{outlined:"",modelValue:e.formData.description,"onUpdate:modelValue":t[2]||(t[2]=a=>e.formData.description=a),placeholder:"Project description",dense:!0},null,8,["modelValue"]),o(d,{outlined:"",modelValue:e.formData.address,"onUpdate:modelValue":t[3]||(t[3]=a=>e.formData.address=a),placeholder:"Address",dense:!0},null,8,["modelValue"]),o(d,{outlined:"",modelValue:e.formData.budget,"onUpdate:modelValue":t[4]||(t[4]=a=>e.formData.budget=a),placeholder:"Budget",dense:!0},null,8,["modelValue"]),o(r,{data:e.vendor_data,onSelected:t[5]||(t[5]=a=>e.formData.vendor=a),label:"Vendor",api:"users",userType:"VENDOR"},null,8,["data"]),o(r,{data:e.client_data,onSelected:t[6]||(t[6]=a=>e.formData.client=a),label:"Client",api:"users",userType:"CLIENT"},null,8,["data"]),o(d,{outlined:"",modelValue:e.formData.start_date,"onUpdate:modelValue":t[7]||(t[7]=a=>e.formData.start_date=a),type:"date",label:"Start Date",dense:!0},null,8,["modelValue"]),o(d,{outlined:"",modelValue:e.formData.end_date,"onUpdate:modelValue":t[8]||(t[8]=a=>e.formData.end_date=a),type:"date",label:"End Date",dense:!0},null,8,["modelValue"]),l("div",$,[e.authStore.canAccess("project_write")?(n(),V(i,{key:0,label:"Save",color:"green",class:"px-10 py-2.5",onClick:e.registerUser},null,8,["onClick"])):D("",!0),o(i,{label:"Back",color:"green",class:"px-10 py-2.5",onClick:t[9]||(t[9]=a=>e.$router.back())})])]),_:1})]),_:1})])])}var O=u(S,[["render",A]]);export{O as default};
